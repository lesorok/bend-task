import{h as J,m as S}from"./chunk-P74FETMS.js";import{$a as q,Aa as y,Ba as v,Ca as s,Da as p,Ea as u,Ga as x,Ha as W,Ia as z,L as k,Ma as h,Na as H,Oa as w,Pa as f,Q as F,Ra as N,S as A,Sa as B,T as l,V as E,_ as $,a as O,b as P,ma as d,p as b,sa as L,wa as g,ya as m,za as C}from"./chunk-VTV6O5HA.js";var T=class{constructor(t,r){this.id=t,this.name=r}};var U=(()=>{let t=class t{constructor(){this.http=F(S)}getAreas(){return this.http.get("assets/areas.json").pipe(b(o=>o.map(n=>new T(n.areaId,n.name))))}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var V=["*"],I=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=l({type:t,selectors:[["app-area"]],inputs:{area:"area"},standalone:!0,features:[f],ngContentSelectors:V,decls:5,vars:1,consts:[[1,"area-name"],[1,"content"]],template:function(n,i){n&1&&(W(),s(0,"section")(1,"p",0),h(2),p(),s(3,"div",1),z(4),p()()),n&2&&(d(2),H(i.area.name))},styles:["[_nghost-%COMP%]{display:block}.area-name[_ngcontent-%COMP%]{margin:10px;font-size:25px}.content[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}"],changeDetection:0});let e=t;return e})();var G=class{constructor(t,r,o){this.id=t,this.areaId=r,this.things=o}};var M=class{constructor(t,r,o,n){this.id=t,this.sku=r,this.defaultSku=o,this.status=n}};var X=(()=>{let t=class t{constructor(){this.http=F(S)}getThingsGroups(){return this.http.get("assets/things.json").pipe(b(o=>{let n=[],i=new Map;return o.forEach(a=>{i.get(a.joinedWith)||i.set(a.joinedWith,[]),i.set(a.joinedWith,[...Array.from(i.get(a.joinedWith)||[]),a])}),o.forEach(a=>{a.joinedWith===null&&n.push(this.buildThingGroup(a,i))}),n.map(a=>new G(a.map(c=>c.id).join("-"),a[0].areaId,a.map(c=>new M(c.id,c.sku,c.defaultSku,c.status)))).sort((a,c)=>c.things.length-a.things.length)}))}buildThingGroup(o,n){let i=[o];return(n.get(o.id)||[]).forEach(a=>{i.push(...this.buildThingGroup(a,n))}),i}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Y(e,t){e&1&&u(0,"div",0)}var D=(()=>{let t=class t{constructor(){this.isConnected=!1,this.color=null}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=l({type:t,selectors:[["app-thing-card"]],inputs:{isConnected:[A.HasDecoratorInputTransform,"isConnected","isConnected",q],thing:"thing",color:"color"},standalone:!0,features:[L,f],decls:7,vars:4,consts:[[1,"thing__connection"],[1,"thing"],[1,"thing__status",3,"ngClass"],[1,"thing__sku"],[1,"thing__default-sku"]],template:function(n,i){n&1&&(g(0,Y,1,0,"div",0),s(1,"div",1),u(2,"div",2),s(3,"div",3),h(4),p(),s(5,"div",4),h(6),p()()),n&2&&(C(0,i.isConnected?0:-1),d(2),m("ngClass",i.color),d(2),w(" ",i.thing.sku," "),d(2),w(" ",i.thing.defaultSku," "))},dependencies:[J],styles:["[_nghost-%COMP%]{display:flex;flex-direction:row;align-items:center}.yellow[_ngcontent-%COMP%]{background-color:#f4e700}.red[_ngcontent-%COMP%]{background-color:#f64d25}.orange[_ngcontent-%COMP%]{background-color:#ff9800}.thing[_ngcontent-%COMP%]{display:flex;position:relative;border-radius:12px;overflow:hidden;width:170px;height:100px;align-items:center;justify-content:center;background-color:#2b4e87}.thing__connection[_ngcontent-%COMP%]{background-color:#203d74;height:75px;width:12px}.thing__sku[_ngcontent-%COMP%]{font-size:30px}.thing__default-sku[_ngcontent-%COMP%]{position:absolute;right:15px;top:10px;font-size:20px}.thing__status[_ngcontent-%COMP%]{position:absolute;width:22px;border-radius:8px;left:-16px;height:80px}"],changeDetection:0});let e=t;return e})();var K=(()=>{let t=class t{transform(o){let n=o.map(i=>i.status);return n.every(i=>i==="open")?"yellow":n.every(i=>i==="closed")?"red":"orange"}};t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=E({name:"getColorFromStatuses",type:t,pure:!0,standalone:!0});let e=t;return e})();var Z=(e,t)=>t.id;function tt(e,t){if(e&1&&(u(0,"app-thing-card",0),N(1,"getColorFromStatuses")),e&2){let r=x().$implicit,o=x();m("thing",r)("color",B(1,2,o.thingGroup.things))}}function et(e,t){if(e&1&&u(0,"app-thing-card",1),e&2){let r=x().$implicit;m("thing",r)}}function nt(e,t){if(e&1&&g(0,tt,2,4,"app-thing-card",0)(1,et,1,1),e&2){let r=t.$index;C(0,r===0?0:1)}}var j=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=l({type:t,selectors:[["app-thing-group"]],inputs:{thingGroup:"thingGroup"},standalone:!0,features:[f],decls:2,vars:0,consts:[[3,"thing","color"],["isConnected","",3,"thing"]],template:function(n,i){n&1&&y(0,nt,2,1,null,null,Z),n&2&&v(i.thingGroup.things)},dependencies:[D,K],styles:["[_nghost-%COMP%]{display:flex}"],changeDetection:0});let e=t;return e})();var Q=(e,t)=>t.id;function ot(e,t){if(e&1&&u(0,"app-thing-group",1),e&2){let r=t.$implicit;m("thingGroup",r)}}function it(e,t){if(e&1&&(s(0,"app-area",0),y(1,ot,1,1,"app-thing-group",1,Q),p()),e&2){let r=t.$implicit;m("area",r),d(),v(r.thingGroups)}}function rt(e,t){if(e&1&&y(0,it,3,1,"app-area",0,Q),e&2){let r=x();v(r.parsedAreas)}}function at(e,t){e&1&&(s(0,"h1"),h(1,"Loading..."),p())}var st=(()=>{let t=class t{constructor(){this.parsedAreas=[]}ngOnChanges(){this.parsedAreas=this.areas.map(o=>{let n=this.thingGroups.filter(i=>i.areaId===o.id);return P(O({},o),{thingGroups:n})})}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=l({type:t,selectors:[["app-areas-list"]],inputs:{areas:"areas",thingGroups:"thingGroups"},standalone:!0,features:[$,f],decls:2,vars:1,consts:[[3,"area"],[3,"thingGroup"]],template:function(n,i){n&1&&g(0,rt,2,0)(1,at,2,0),n&2&&C(0,i.parsedAreas.length?0:1)},dependencies:[I,j],styles:["[_nghost-%COMP%]{display:block;padding:20px}app-area[_ngcontent-%COMP%]{margin-block-end:30px}"],changeDetection:0});let e=t;return e})();export{U as a,X as b,st as c};
