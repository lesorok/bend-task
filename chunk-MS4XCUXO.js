import{h as J,m as w}from"./chunk-P74FETMS.js";import{$a as q,Aa as g,Ba as C,Ca as s,Da as m,Ea as u,Ga as F,Ha as z,Ia as H,L as G,Ma as x,Na as L,Oa as I,Pa as f,Q as M,Ra as N,S as A,Sa as B,T as c,V as E,_ as $,a as O,b as P,ma as l,p as T,sa as W,wa as b,ya as d,za as k}from"./chunk-VTV6O5HA.js";var _=class{constructor(t,r){this.id=t,this.name=r}};var U=(()=>{let t=class t{constructor(){this.http=M(w)}getAreas(){return this.http.get("assets/areas.json").pipe(T(o=>o.map(n=>new _(n.areaId,n.name))))}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var V=["*"],S=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=c({type:t,selectors:[["app-area"]],inputs:{area:"area"},standalone:!0,features:[f],ngContentSelectors:V,decls:5,vars:1,consts:[[1,"area-name"],[1,"content"]],template:function(n,i){n&1&&(z(),s(0,"section")(1,"p",0),x(2),m(),s(3,"div",1),H(4),m()()),n&2&&(l(2),L(i.area.name))},styles:["[_nghost-%COMP%]{display:block}.area-name[_ngcontent-%COMP%]{margin:10px;font-size:25px}.content[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}"],changeDetection:0});let e=t;return e})();var y=class{constructor(t,r,o){this.id=t,this.areaId=r,this.things=o}};var v=class{constructor(t,r,o,n){this.id=t,this.sku=r,this.defaultSku=o,this.status=n}};var X=(()=>{let t=class t{constructor(){this.http=M(w)}getThingsGroups(){return this.http.get("assets/things.json").pipe(T(o=>{let n=[],i=new Map;return o.forEach(a=>{i.get(a.joinedWith)||i.set(a.joinedWith,[]),i.set(a.joinedWith,[...Array.from(i.get(a.joinedWith)||[]),a])}),o.forEach(a=>{a.joinedWith===null&&n.push(this.buildThingGroup(a,i))}),n.map(a=>new y(a.map(p=>p.id).join("-"),a[0].areaId,a.map(p=>new v(p.id,p.sku,p.defaultSku,p.status)))).sort((a,p)=>p.things.length-a.things.length)}))}buildThingGroup(o,n){let i=[o];return(n.get(o.id)||[]).forEach(a=>{i.push(...this.buildThingGroup(a,n))}),i}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Y(e,t){e&1&&u(0,"div",0)}var D=(()=>{let t=class t{constructor(){this.isConnected=!1,this.color=null}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=c({type:t,selectors:[["app-thing-card"]],inputs:{isConnected:[A.HasDecoratorInputTransform,"isConnected","isConnected",q],thing:"thing",color:"color"},standalone:!0,features:[W,f],decls:7,vars:4,consts:[[1,"thing__connection"],[1,"thing"],[1,"thing__status",3,"ngClass"],[1,"thing__sku"],[1,"thing__default-sku"]],template:function(n,i){n&1&&(b(0,Y,1,0,"div",0),s(1,"div",1),u(2,"div",2),s(3,"div",3),x(4),m(),s(5,"div",4),x(6),m()()),n&2&&(k(0,i.isConnected?0:-1),l(2),d("ngClass",i.color),l(2),I(" ",i.thing.sku," "),l(2),I(" ",i.thing.defaultSku," "))},dependencies:[J],styles:["[_nghost-%COMP%]{display:flex;flex-direction:row;align-items:center}.yellow[_ngcontent-%COMP%]{background-color:#f4e700}.red[_ngcontent-%COMP%]{background-color:#f64d25}.orange[_ngcontent-%COMP%]{background-color:#ff9800}.thing[_ngcontent-%COMP%]{display:flex;position:relative;border-radius:12px;overflow:hidden;width:170px;height:100px;align-items:center;justify-content:center;background-color:#2b4e87}.thing__connection[_ngcontent-%COMP%]{background-color:#203d74;height:75px;width:12px}.thing__sku[_ngcontent-%COMP%]{font-size:30px}.thing__default-sku[_ngcontent-%COMP%]{position:absolute;right:15px;top:10px;font-size:20px}.thing__status[_ngcontent-%COMP%]{position:absolute;width:22px;border-radius:8px;left:-16px;height:80px}"],changeDetection:0});let e=t;return e})();var K=(()=>{let t=class t{transform(o){let n=o.map(i=>i.status);return n.every(i=>i==="open")?"yellow":n.every(i=>i==="closed")?"red":"orange"}};t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=E({name:"getColorFromStatuses",type:t,pure:!0,standalone:!0});let e=t;return e})();var Z=(e,t)=>t.id;function tt(e,t){if(e&1&&(u(0,"app-thing-card",0),N(1,"getColorFromStatuses")),e&2){let r=F().$implicit,o=F();d("thing",r)("color",B(1,2,o.thingGroup.things))}}function et(e,t){if(e&1&&u(0,"app-thing-card",1),e&2){let r=F().$implicit;d("thing",r)}}function nt(e,t){if(e&1&&b(0,tt,2,4,"app-thing-card",0)(1,et,1,1),e&2){let r=t.$index;k(0,r===0?0:1)}}var j=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=c({type:t,selectors:[["app-thing-group"]],inputs:{thingGroup:"thingGroup"},standalone:!0,features:[f],decls:2,vars:0,consts:[[3,"thing","color"],["isConnected","",3,"thing"]],template:function(n,i){n&1&&g(0,nt,2,1,null,null,Z),n&2&&C(i.thingGroup.things)},dependencies:[D,K],styles:["[_nghost-%COMP%]{display:flex}"],changeDetection:0});let e=t;return e})();var Q=(e,t)=>t.id;function ot(e,t){if(e&1&&u(0,"app-thing-group",1),e&2){let r=t.$implicit;d("thingGroup",r)}}function it(e,t){if(e&1&&(s(0,"app-area",0),g(1,ot,1,1,"app-thing-group",1,Q),m()),e&2){let r=t.$implicit;d("area",r),l(),C(r.thingGroups)}}var rt=(()=>{let t=class t{constructor(){this.parsedAreas=[]}ngOnChanges(){this.parsedAreas=this.areas.map(o=>{let n=this.thingGroups.filter(i=>i.areaId===o.id);return P(O({},o),{thingGroups:n})})}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=c({type:t,selectors:[["app-areas-list"]],inputs:{areas:"areas",thingGroups:"thingGroups"},standalone:!0,features:[$,f],decls:2,vars:0,consts:[[3,"area"],[3,"thingGroup"]],template:function(n,i){n&1&&g(0,it,3,1,"app-area",0,Q),n&2&&C(i.parsedAreas)},dependencies:[S,j],styles:["[_nghost-%COMP%]{display:block;padding:20px}app-area[_ngcontent-%COMP%]{margin-block-end:30px}"],changeDetection:0});let e=t;return e})();export{U as a,X as b,rt as c};
